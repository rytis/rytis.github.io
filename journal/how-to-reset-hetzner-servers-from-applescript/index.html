<!DOCTYPE html>
<html><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/css/style.css">
  <title>Pages</title>
</head>
<body>
      <div class="container"><header>
  <h1>Pages</h1>
</header>
<nav>
  <a href="/"><strong>Home</strong></a>
  
  <a href="/journal/"><strong>Journal</strong></a>
  
  <a href="/publications/"><strong>Publications</strong></a>
  
</nav>
<div id="content">
          <main>
  <h2>How to reset Hetzner servers from AppleScript</h2>
  <p><a href="http://www.hetzner.de/">Hetzner</a> is a great hosting company. It&rsquo;s hard to find a deal that would beat their hosting prices, and the service is superb. In 7 years I&rsquo;ve experienced only one brief network outage, and one power outage (when they changed power outlets or something like that), which was clearly communicated well in advance. So I can only highly recommend them - my experience was only positive one.</p>
<p>They also have a nice administration interface, where you can manage your servers, request IP ranges, control bandwidth monitoring, and request server restarts.</p>
<p>Although it shouldn&rsquo;t happen very often, you may find that every now and then your server becomes unresponsive - due to misconfiguration, or an application becomes too greedy, and clings on too many resources, thus rendering the whole system unusable.</p>
<p>Resetting a server from Hetzner&rsquo;s management console couldn&rsquo;t be easier, but they made this task even more simple by exposing some of the management functionality via a <a href="http://wiki.hetzner.de/index.php/Robot_Webservice/en">simple to use API</a>. There are already <a href="https://github.com/rmoriz/hetzner-api">libraries available</a>, but it is simple enough so you can use curl to perform most of the tasks.</p>
<p>Although this blog is mostly about Python, but I&rsquo;ll throw in some variety and share a simple AppleScript snippet, which you can use to reset your servers hosted with Hetzner:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-applescript" data-lang="applescript">
<span style="color:#66d9ef">set</span> dd <span style="color:#66d9ef">to</span> display dialog <span style="color:#e6db74">&#34;Reset server?&#34;</span>
 
<span style="color:#66d9ef">set</span> <span style="color:#66d9ef">result</span> <span style="color:#66d9ef">to</span> do shell script <span style="color:#e6db74">&#34;curl -u [username]:[password] https://robot-ws.your-server.de/reset/[server IP] -d type=hw&#34;</span>
 
display dialog <span style="color:#e6db74">&#34;Query result: &#34;</span> <span style="color:#f92672">&amp;</span> <span style="color:#66d9ef">result</span> buttons <span style="color:#e6db74">&#34;OK&#34;</span> default button <span style="color:#e6db74">&#34;OK&#34;</span>

</code></pre></div>

          </main>
        </div><footer>
  <small>&copy; 2021 Rytis Sileika</small>
</footer>
</div>
    </body>
</html>
